@page
@model RegisterModel
@{
    ViewData["Title"] = "";
}

<h1 class="pt-4">@ViewData["Title"]</h1>

<div class="row">
    <div class="col-md-7 row">
        <form id="registerForm" class="row" asp-route-returnUrl="@Model.ReturnUrl" method="post">
            <h2>Create a new account.</h2>
            <br />
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-floating py-2 col-6">
                <input asp-for="Input.Name" class="form-control" autocomplete="username" aria-required="true" />
                <label asp-for="Input.Name"></label><span style="color:red; font-size:2em">*</span>
                <span asp-validation-for="Input.Name" class="text-danger"></span>
            </div>
            <br />

            <div class="form-floating py-2 col-6">
                <input asp-for="Input.Email" class="form-control" aria-required="true" />
                <label asp-for="Input.Email"></label><span style="color:red; font-size:2em">*</span>
                <span asp-validation-for="Input.Email" class="text-danger"></span>
            </div>
            <br />

            <div class="form-floating py-2 col-6">
                <input asp-for="Input.PhoneNumber" class="form-control" aria-required="true" />
                <label asp-for="Input.PhoneNumber"></label><span style="color:red; font-size:2em">*</span>
                <span asp-validation-for="Input.PhoneNumber" class="text-danger"></span>
            </div>
            <br />

            <div class="form-floating py-2 col-6">
                <input asp-for="Input.StreetAddress" class="form-control" aria-required="true" />
                <label asp-for="Input.StreetAddress"></label><span style="color:red; font-size:2em">*</span>
                <span asp-validation-for="Input.StreetAddress" class="text-danger"></span>
            </div>
            <br />

            <div class="form-floating py-2 col-6">
                <input asp-for="Input.City" class="form-control" aria-required="true" />
                <label asp-for="Input.City"></label><span style="color:red; font-size:2em">*</span>
                <span asp-validation-for="Input.City" class="text-danger"></span>
            </div>
            @* <br />

            <div class="form-floating py-2 col-6">
                <input asp-for="Input.State" class="form-control" aria-required="true" />
                <label asp-for="Input.State"></label>
                <span asp-validation-for="Input.State" class="text-danger"></span>
            </div> *@
            <br />

            <div class="form-floating py-2 col-6">
                <input asp-for="Input.PostalCode" class="form-control" aria-required="true" />
                <label asp-for="Input.PostalCode"></label><span style="color:red; font-size:2em">*</span>
                <span asp-validation-for="Input.PostalCode" class="text-danger"></span>
            </div>
            <br />

            <div class="form-floating py-2 col-6">
                <input asp-for="Input.Password" class="form-control" autocomplete="new-password" aria-required="true" />
                <label asp-for="Input.Password"></label><span style="color:red; font-size:2em">*</span>
                <span asp-validation-for="Input.Password" class="text-danger"></span>
            </div>
            <br />

            <div class="form-floating py-2 col-6">
                <input asp-for="Input.ConfirmPassword" class="form-control" autocomplete="new-password" aria-required="true" />
                <label asp-for="Input.ConfirmPassword"></label><span style="color:red; font-size:2em">*</span>
                <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
            </div>
            <br />

            @* <div class="form-floating py-2 col-6">
                <select asp-for="Input.Role" asp-items="@Model.Input.RoleList" class="form-select"> 
                    <option disabled selected>--Selected Role--</option>
                </select>
            </div>
            <br />

            <div class="form-floating py-2 col-6">
                <select asp-for="Input.CompanyId" style="display:none" asp-items="@Model.Input.CompanyList" class="form-select">
                    <option disabled selected>--Selected Company--</option>
                </select>
            </div> *@
        

            <button id="registerSubmit" type="submit" class="login">Register</button>

        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        $(document).ready(function () {
            $('#registerSubmit').click(function (e) {
                var phoneNumber = $('#Input_PhoneNumber').val();
                var phoneRegex = /^0[35789]\d{8}$/;

                if (!phoneRegex.test(phoneNumber)) {
                    e.preventDefault(); // Prevent form submission
                    alert("Please enter a valid Vietnamese phone number. It must be 10 digits and start with 03, 05, 07, 08, or 09.");
                }
            });

            $('#Input_Role').change(function () {
                var selection = $('#Input_Role option:selected').text();
                if (selection != 'Company') {
                    $('#Input_CompanyId').hide();
                } else {
                    $('#Input_CompanyId').show();
                }
            });
        });
    </script>
}

